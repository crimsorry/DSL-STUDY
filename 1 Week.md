## 목표

###### 자바 소스 파일(.java)을 JVM으로 실행하는 과정 이해하기.



## 학습할 것



####  - JVM이란 무엇인가

> 자바 가상 머신 (JVM: Java Virtual Machine)
>
> 자바 파일은 **컴파일러를 통해 바이트코드로 변환를 생성**한다. 그리고 **이 바이트 코트는 JVM이라는 소프트웨어에 의해 해석되어 실행**된다.
>
> > 두 단계로 나누어 실행되는 이유: 응용 프로그램들을 다시 컴파일하지 않아도 모든 컴퓨터에서 실행되게 하기 위해서.
>
> * 특징
>
>   * 스택 기반 가상머신
>
>   * 가비지 컬렉션 (garbage collection)
>
>     > 프로그램이 할당한 메모리 영역중 필요 없게된 부분은 해제하거나 필요한 메모리는 할당하는 기능. **(메모리 해제나 폐시 수행)**
>
>   * 기본 자료형을 명확하게 정의하여 플랫폼 독립성 보장



####  - 컴파일 하는 방법

> 1. 이클립스에서 실행 
>
>    >  이클립스는 기본적으로 java를 컴파일 할 수 있는 통합 개발 환경 (integrated development environment)
>    >
>    > 통합 개발 환경을 통해 컴파일과 실행을 보다 편리하게 사용 할 수 있지만 명령어 도구 설치와 기본적인 사용법은 필수적으로 알아야한다.
>
>    * 이클립스에서 class 파일 (.java) 생성
>
> 2. 컴파일러를 이용한 컴파일
>
>    * HelloWord.java 파일 생성
>
>    * cmd 창에서 아래 코드 실행
>
>       ```
>       javac HelloWord.java # 소스 파일을 컴파일 하여 클래스 파일로 변환 
>       ```
>
>    * HelloWord.class 파일 생성
>
>



####  - 실행 하는 방법

> 1. 이클립스에서 실행
>
>    * 이클립스 실행(run) 후 콘솔 창에서 결과 확인
>
> 2. JVM을 이용한 실행
>
>    * cmd 창에서 아래 코드 실행
>
>      ```
>      java HelloWord # JVM에서 클래스 파일 실행
>      ```



####  - 바이트코드란 무엇인가

> .class
>
> 바이트 코드는 일종의 중간 코드로서 특정 컴퓨터의 기계어와는 일치하지 않지만, **어떠한 기계어로도 쉽게 변환이 가능.**
>
> JVM만 가지고 있다면 어떤 바이트 코드도 재 컴파일 없이 실행 가능.
>
> JVM을 통해 윈도우 XP, 솔라리스, 리눅스 Mac OS에서 변경없이 실행 가능.



####  - JIT 컴파일러란 무엇이며 어떻게 동작하는지

> 초기버전의 자바에서는 JVM이 단순한 인터프리터였음. 
>
> 따라서 한번에 하나의 바이트 코드만을 해석하여 실행했기 때문에 상당히 실행 속도가 느렸기 때문에 최근의 JVM은 해석과 동시에 JIT(just-in-time)이라는 기술을 사용
>
> JVM은 바이트 코드를 해석하면서 동시에 어떤 부분이 가장 빈번하게 실행되는지 분석.
>
> 이러한 부분이 발견되면서 Java Spot이라고 알려진 JIT 컴파일러가 **바이트 코드를 실제 컴퓨터의 기계어로 직접 변환하여 빠르게 실행**



####  - JVM 구성 요소

> ![1](https://user-images.githubusercontent.com/31988854/135709535-ba22ada7-4819-40cf-95dc-044fb85eeea6.png)
>
> * JVM 자바 클래스 로더 (Class Loader)
>
>   > 컴파일된 .class 파일을 JVM 내로 로드(Load)하고 링크를 통해 배치
>   >
>   > **Runtime 시에 동적으로 클래스를 메모리에 로딩, 사용하지 않는 클래스들은 메모리에서 삭제**
>   >
>   > 클래스 로더는 클래스 로딩(Class Loading)을 최대한 효율적으로 수행하기 위해 **지연 로딩(Lazy-Loading)**과 **캐싱(Caching)**같은 기법을 활용
>   
>  * JVM 실행 엔진 (Execution Engine)
>
>    > 클래스 로더가 JVM내에 존재하는 런타임 데이터 영역에 클래스를 로딩하는 작업을 마치면, JVM은 각 클래스에 있는 코드를 실행하기 시작
>    >
>    > **바이트 코드(.class 파일)를 JVM 내부의 기계가 읽고 실행할 수 있는 형태로 변경**
>
>  * 인터프리터 (Interpreter)
>
>    > JVM 실행 엔진이 **바이트 코드를 '명령어 단위'로 읽어 실행**
>    >
>    > 하짐나 한 줄씩 수행하기때문에 느림.
>
>  * JIT
>
>  * Garabge Collection
>
>  * Runtime Data Area
>
>    > 프로그램을 수행하기 위해운영체제로부터 할당받은 메모리 공간
>
>
> 출처: https://siahn95.tistory.com/entry/Java-JVM%EC%9D%B4%EB%9E%80-3-JVM%EC%9D%98-%EB%91%90-%EA%B0%80%EC%A7%80-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C



####  - JDK와 JRE의 차이

> * JRE (Java Runtime Environment)
>
>   * JRE는 **자바 프로그램을 실행하기위한** 라이브러리, 자바 가상 머신, 기타 컴포넌트들을 제공.
>
>   * 자바 프로그램을 단순히 실행만 하고, 개발은 하지 않는 일반인들을 위한 환경
> * JDK (Java Developement Kit)
>   * JDK는 JRE에 추가로 **자바 프로그램을 개발**하는데 필요한 컴파일러, 디버거와 같은 명령어행 개발 도구를 추가한 것.
>   * JDK안에 JRE가 포함되어 있음을 유의.
>
> 



출처: Power JAVA 서적 참고
